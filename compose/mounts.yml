# mount project source directories so changes to source are immediately reflected in the services
version: '3'
services:
  cognito:
    # command: ["tail", "-F", "log/development.log"] # don't start the server
    volumes:
      - "${ros_dir:-.}/services/cognito:/home/rails/app"
      - "${ros_dir:-.}/services/core:/home/rails/core"
      - "${ros_dir:-.}/services/sdk:/home/rails/sdk"
  comm:
    # command: ["tail", "-F", "log/development.log"] # don't start the server
    volumes:
      - "${ros_dir:-.}/services/comm:/home/rails/app"
      - "${ros_dir:-.}/services/core:/home/rails/core"
      - "${ros_dir:-.}/services/sdk:/home/rails/sdk"
  iam:
    # environment:
    # disabling tail command will start webrick automatically; will also shutdown container quicker in case of multiple restarts
    # command: ["tail", "-F", "log/development.log"] # don't start the server
    volumes:
      - "${ros_dir:-.}/services/iam:/home/rails/app"
      - "${ros_dir:-.}/services/core:/home/rails/core"
      - "${ros_dir:-.}/services/sdk:/home/rails/sdk"
    # ports: # https://docs.docker.com/compose/compose-file/#ports
    #   - '1234:1234'
    #   - '9394:9394'
